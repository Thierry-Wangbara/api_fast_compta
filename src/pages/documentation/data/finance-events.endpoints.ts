import type { Endpoint } from '../types.ts'

export const financeEventsEndpoints: Endpoint[] = [
  {
    method: 'GET',
    path: '/api/finance-events',
    description: 'Lister les événements financiers',
    query: [
      { name: 'type', type: 'string', description: "Filtrer par type d'événement" },
      { name: 'ref_id', type: 'number', description: 'Filtrer par identifiant de référence (transaction, dette…)' },
      { name: 'from_date', type: 'number', description: 'Limiter les événements après cette date (timestamp)' },
      { name: 'to_date', type: 'number', description: 'Limiter les événements avant cette date (timestamp)' },
      { name: 'limit', type: 'number', description: 'Limiter le nombre de résultats' },
      { name: 'offset', type: 'number', description: 'Décalage pour la pagination' },
    ],
    responseExample: [
      {
        id: 1,
        type: 'transaction',
        title: 'Nouvelle transaction',
        ref_id: 1,
        amount: 50000,
        meta: { tx_code: 'TX-1704240000000-ABC123XYZ' },
        occurred_at: 1704240000000,
        created_at: 1704240000000,
        updated_at: 1704240000000,
      },
    ],
  },
  {
    method: 'GET',
    path: '/api/finance-events/:id',
    description: 'Récupérer un événement financier par son identifiant',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de l’événement' },
    ],
    responseExample: {
      id: 1,
      type: 'transaction',
      title: 'Nouvelle transaction',
      ref_id: 1,
      amount: 50000,
      meta: { tx_code: 'TX-1704240000000-ABC123XYZ' },
      occurred_at: 1704240000000,
      created_at: 1704240000000,
      updated_at: 1704240000000,
    },
  },
  {
    method: 'POST',
    path: '/api/finance-events',
    description: 'Créer un événement financier',
    body: [
      { name: 'type', type: 'string', required: true, description: "Type d'événement" },
      { name: 'title', type: 'string', required: true, description: 'Titre décrivant brièvement l’événement' },
      { name: 'ref_id', type: 'number', required: false, description: 'Identifiant de référence (lié à un autre objet)' },
      { name: 'amount', type: 'number', required: false, description: 'Montant associé à l’événement' },
      { name: 'meta', type: 'any', required: false, description: 'Objet de métadonnées supplémentaire (JSON)' },
      { name: 'occurred_at', type: 'number', required: false, description: 'Date de survenue (timestamp)' },
    ],
    requestExample: { type: 'transaction', title: 'Nouvelle transaction', ref_id: 1, amount: 50000, meta: { tx_code: 'TX-1704240000000-ABC123XYZ' } },
    responseExample: {
      id: 2,
      type: 'transaction',
      title: 'Nouvelle transaction',
      ref_id: 1,
      amount: 50000,
      meta: { tx_code: 'TX-1704240000000-ABC123XYZ' },
      occurred_at: 1704240000000,
      created_at: 1704240000000,
      updated_at: 1704240000000,
    },
  },
  {
    method: 'PUT',
    path: '/api/finance-events/:id',
    description: 'Mettre à jour un événement financier',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de l’événement' },
    ],
    body: [
      { name: 'type', type: 'string', required: false, description: "Type d'événement" },
      { name: 'title', type: 'string', required: false, description: 'Titre' },
      { name: 'ref_id', type: 'number', required: false, description: 'Identifiant de référence' },
      { name: 'amount', type: 'number', required: false, description: 'Montant' },
      { name: 'meta', type: 'any', required: false, description: 'Objet de métadonnées (JSON)' },
      { name: 'occurred_at', type: 'number', required: false, description: 'Date de survenue (timestamp)' },
    ],
    requestExample: { title: 'Titre modifié', amount: 60000 },
    responseExample: {
      id: 1,
      type: 'transaction',
      title: 'Titre modifié',
      ref_id: 1,
      amount: 60000,
      meta: { tx_code: 'TX-1704240000000-ABC123XYZ' },
      occurred_at: 1704240000000,
      created_at: 1704240000000,
      updated_at: 1704412800000,
    },
  },
  {
    method: 'DELETE',
    path: '/api/finance-events/:id',
    description: 'Supprimer un événement financier',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de l’événement' },
    ],
    responseExample: null,
  },
]
