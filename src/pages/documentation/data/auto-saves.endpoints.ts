import type { Endpoint } from '../types.ts'

export const autoSavesEndpoints: Endpoint[] = [
  {
    method: 'GET',
    path: '/api/auto-saves',
    description: 'Lister les épargnes automatiques',
    query: [
      { name: 'enabled', type: 'boolean', description: 'Filtrer par statut activé/désactivé' },
      { name: 'accounting_code', type: 'string', description: 'Filtrer par code de comptabilité associé' },
      { name: 'limit', type: 'number', description: 'Limiter le nombre de résultats' },
      { name: 'offset', type: 'number', description: 'Décalage pour la pagination' },
    ],
    responseExample: [
      {
        id: 1,
        title: 'Épargne automatique mensuelle',
        note: 'Mettre de côté chaque mois',
        amount: 10000,
        cadence: 'monthly',
        enabled: true,
        start_at: 1704240000000,
        last_run_at: null,
        accounting_code: 'MASTER',
        created_at: 1704240000000,
        updated_at: 1704240000000,
      },
    ],
  },
  {
    method: 'GET',
    path: '/api/auto-saves/:id',
    description: 'Récupérer une épargne automatique par son identifiant',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de l’épargne automatique' },
    ],
    responseExample: {
      id: 1,
      title: 'Épargne automatique mensuelle',
      note: 'Mettre de côté chaque mois',
      amount: 10000,
      cadence: 'monthly',
      enabled: true,
      start_at: 1704240000000,
      last_run_at: null,
      accounting_code: 'MASTER',
      created_at: 1704240000000,
      updated_at: 1704240000000,
    },
  },
  {
    method: 'POST',
    path: '/api/auto-saves',
    description: 'Créer une nouvelle épargne automatique',
    body: [
      { name: 'title', type: 'string', required: true, description: 'Titre de l’épargne automatique' },
      { name: 'amount', type: 'number', required: true, description: 'Montant à transférer à chaque exécution (≥ 0)' },
      { name: 'cadence', type: 'string', required: true, description: 'Périodicité : "daily", "weekly" ou "monthly"' },
      { name: 'note', type: 'string', required: false, description: 'Note facultative' },
      { name: 'enabled', type: 'boolean', required: false, description: 'Activer l’épargne automatique' },
      { name: 'start_at', type: 'number', required: false, description: 'Date de début (timestamp)' },
      { name: 'accounting_code', type: 'string', required: false, description: 'Code de comptabilité associé' },
    ],
    requestExample: {
      title: 'Épargne auto vacances',
      amount: 20000,
      cadence: 'monthly',
      note: 'Épargner pour les vacances',
      enabled: true,
      start_at: 1704240000000,
      accounting_code: 'MASTER',
    },
    responseExample: {
      id: 1,
      title: 'Épargne auto vacances',
      note: 'Épargner pour les vacances',
      amount: 20000,
      cadence: 'monthly',
      enabled: true,
      start_at: 1704240000000,
      last_run_at: null,
      accounting_code: 'MASTER',
      created_at: 1704240000000,
      updated_at: 1704240000000,
    },
  },
  {
    method: 'PUT',
    path: '/api/auto-saves/:id',
    description: 'Mettre à jour une épargne automatique',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de l’épargne automatique' },
    ],
    body: [
      { name: 'title', type: 'string', required: false, description: 'Titre' },
      { name: 'note', type: 'string', required: false, description: 'Note' },
      { name: 'amount', type: 'number', required: false, description: 'Montant (≥ 0)' },
      { name: 'cadence', type: 'string', required: false, description: 'Périodicité ("daily", "weekly", "monthly")' },
      { name: 'enabled', type: 'boolean', required: false, description: 'Activer ou désactiver' },
      { name: 'start_at', type: 'number', required: false, description: 'Date de début (timestamp)' },
      { name: 'last_run_at', type: 'number', required: false, description: 'Date de la dernière exécution (timestamp)' },
      { name: 'accounting_code', type: 'string', required: false, description: 'Code de comptabilité associé' },
    ],
    requestExample: { amount: 15000, cadence: 'weekly', enabled: false },
    responseExample: {
      id: 1,
      title: 'Épargne auto vacances',
      note: 'Épargner pour les vacances',
      amount: 15000,
      cadence: 'weekly',
      enabled: false,
      start_at: 1704240000000,
      last_run_at: 1704326400000,
      accounting_code: 'MASTER',
      created_at: 1704240000000,
      updated_at: 1704412800000,
    },
  },
  {
    method: 'DELETE',
    path: '/api/auto-saves/:id',
    description: 'Supprimer une épargne automatique',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de l’épargne automatique' },
    ],
    responseExample: null,
  },
]
