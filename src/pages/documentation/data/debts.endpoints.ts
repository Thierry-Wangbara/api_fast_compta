import type { Endpoint } from '../types.ts'

export const debtsEndpoints: Endpoint[] = [
  {
    method: 'GET',
    path: '/api/debts',
    description: 'Lister les dettes et crédits',
    query: [
      { name: 'type', type: 'string', description: 'Filtrer par type : "debt" ou "credit"' },
      { name: 'closed', type: 'boolean', description: 'Filtrer par statut (true = fermé)' },
      { name: 'limit', type: 'number', description: 'Limiter le nombre de résultats' },
      { name: 'offset', type: 'number', description: 'Décalage pour la pagination' },
    ],
    responseExample: [
      {
        id: 1,
        name: 'Prêt étudiant',
        principal_amount: 1000000,
        remaining_amount: 750000,
        type: 'debt',
        lender: 'Banque A',
        note: null,
        due_date: 1735689600000,
        closed: false,
        created_at: 1704240000000,
        updated_at: 1704240000000,
      },
    ],
  },
  {
    method: 'GET',
    path: '/api/debts/:id',
    description: 'Récupérer une dette par son identifiant',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de la dette' },
    ],
    responseExample: {
      id: 1,
      name: 'Prêt étudiant',
      principal_amount: 1000000,
      remaining_amount: 750000,
      type: 'debt',
      lender: 'Banque A',
      note: null,
      due_date: 1735689600000,
      closed: false,
      created_at: 1704240000000,
      updated_at: 1704240000000,
    },
  },
  {
    method: 'POST',
    path: '/api/debts',
    description: 'Créer une nouvelle dette ou un crédit',
    body: [
      { name: 'name', type: 'string', required: true, description: 'Nom ou description de la dette' },
      { name: 'principal_amount', type: 'number', required: true, description: 'Montant principal (≥ 0)' },
      { name: 'remaining_amount', type: 'number', required: true, description: 'Montant restant dû (≤ principal_amount)' },
      { name: 'type', type: 'string', required: true, description: 'Type : "debt" ou "credit"' },
      { name: 'lender', type: 'string', required: false, description: 'Nom du prêteur ou débiteur' },
      { name: 'note', type: 'string', required: false, description: 'Note facultative' },
      { name: 'due_date', type: 'number', required: false, description: 'Date d’échéance (timestamp)' },
      { name: 'closed', type: 'boolean', required: false, description: 'Statut (true = fermé)' },
    ],
    requestExample: {
      name: 'Prêt étudiant',
      principal_amount: 1000000,
      remaining_amount: 750000,
      type: 'debt',
      lender: 'Banque A',
      note: null,
      due_date: 1735689600000,
    },
    responseExample: {
      id: 1,
      name: 'Prêt étudiant',
      principal_amount: 1000000,
      remaining_amount: 750000,
      type: 'debt',
      lender: 'Banque A',
      note: null,
      due_date: 1735689600000,
      closed: false,
      created_at: 1704240000000,
      updated_at: 1704240000000,
    },
  },
  {
    method: 'PUT',
    path: '/api/debts/:id',
    description: 'Mettre à jour une dette existante',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de la dette' },
    ],
    body: [
      { name: 'name', type: 'string', required: false, description: 'Nom ou description' },
      { name: 'lender', type: 'string', required: false, description: 'Nom du prêteur ou débiteur' },
      { name: 'note', type: 'string', required: false, description: 'Note' },
      { name: 'principal_amount', type: 'number', required: false, description: 'Montant principal (≥ 0)' },
      { name: 'remaining_amount', type: 'number', required: false, description: 'Montant restant dû (≥ 0)' },
      { name: 'due_date', type: 'number', required: false, description: 'Date d’échéance (timestamp)' },
      { name: 'closed', type: 'boolean', required: false, description: 'Fermer ou rouvrir la dette' },
    ],
    requestExample: { remaining_amount: 500000, closed: false },
    responseExample: {
      id: 1,
      name: 'Prêt étudiant',
      principal_amount: 1000000,
      remaining_amount: 500000,
      type: 'debt',
      lender: 'Banque A',
      note: null,
      due_date: 1735689600000,
      closed: false,
      created_at: 1704240000000,
      updated_at: 1704326400000,
    },
  },
  {
    method: 'DELETE',
    path: '/api/debts/:id',
    description: 'Supprimer une dette ou un crédit',
    params: [
      { name: 'id', type: 'number', required: true, description: 'Identifiant de la dette' },
    ],
    responseExample: null,
  },
]
